
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2018-01-26
 Rendered using Msb3 Maven Skin 0.1.1 (http://tunguski.github.io/msb3-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Revapi - Architecture</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="http://bootswatch.com/3/cosmo/bootstrap.min.css" rel="stylesheet" />
		<link href="./css/bootswatch.css" rel="stylesheet" />
		<link href="./css/msb3-skin.css" rel="stylesheet" />

		<link href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/default.min.css" rel="stylesheet" />

		<link href="./css/lightbox.css" rel="stylesheet" />

		<link href="./css/site.css" rel="stylesheet" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
<script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>(adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3133590320590126",
          enable_page_level_ads: true
        });</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-57095904-1', 'auto');
        ga('send', 'pageview');</script>
<link rel="alternate" href="https://revapi.org/news.atom" type="application/rss+xml" title="Revapi News"/>
	</head>

	<body class="page-architecture project-revapi-site" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<header class="navbar navbar-default navbar-fixed-top">
			<div class="container">
				<div class="navbar-header">
					<a class="navbar-toggle collapsed" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="navbar-brand" href="./">Revapi</a>
				</div>
					<div class="collapse navbar-collapse" id="top-nav-collapse">
						<ul class="nav navbar-nav navbar-right">
							<li ><a href="https://diff.revapi.org" title="Online Check" class="externalLink">Online Check</a></li>
							<li ><a href="news.html" title="News">News</a></li>
							<li ><a href="getting-started.html" title="Getting Started">Getting Started</a></li>
							<li ><a href="downloads.html" title="Downloads">Downloads</a></li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Basic Info <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li class="active"><a href="" title="Architecture">Architecture</a></li>
									<li ><a href="building.html" title="Building">Building</a></li>
									<li ><a href="extensions.html" title="Extensions">Extensions</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Sub Projects <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="modules/revapi/index.html" title="Revapi API">Revapi API</a></li>
									<li ><a href="modules/revapi-ant-task/index.html" title="Ant Task">Ant Task</a></li>
									<li ><a href="modules/revapi-basic-features/index.html" title="Basic Features">Basic Features</a></li>
									<li ><a href="modules/revapi-java/index.html" title="Java Extension">Java Extension</a></li>
									<li ><a href="modules/revapi-java-spi/index.html" title="Java Extension SPI">Java Extension SPI</a></li>
									<li ><a href="modules/revapi-java-test-support/index.html" title="Java Test Support">Java Test Support</a></li>
									<li ><a href="modules/revapi-reporter-text/index.html" title="Text Report Extension">Text Report Extension</a></li>
									<li ><a href="modules/revapi-maven-plugin/index.html" title="Maven Plugin">Maven Plugin</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
			</div>
		</header>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron">
		<div class="row">
			<div class="col-md-12">
				<div class="pull-left">
					<a href="https://revapi.org" id="bannerLeft"><h1>Revapi</h1></a>
					<p class="lead">Full-featured API checker for Java and beyond.</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="col-md-8">
			<div class="body-content">
<div class="sect1"> 
 <div class="page-header">
  <h2 id="architecture">Architecture</h2>
 </div> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>Revapi has a very simple architecture consisting of a simple linear pipeline that processes a "forest" (a set of trees) of individual API elements.</p> 
  </div> 
  <div class="paragraph"> 
   <p>The API elements come from archives. As of now, the only possible source of archives is the file system (future versions of Revapi may introduce other implementations for different sources of archives).</p> 
  </div> 
  <div class="paragraph"> 
   <p>A set of archives containing the old version of API is passed to an archive analyzer that produces a forest of API elements. Then archives of the new version are analyzed the same way.</p> 
  </div> 
  <div class="paragraph"> 
   <p>The two API forests are then consistently sorted and traversed in parallel. New or missing elements are detected and equivalent elements are compared using an element analyzer, producing a set of reports that contain the differences found while comparing the elements. The differences are then simply reported.</p> 
  </div> 
  <div class="paragraph"> 
   <p>The following diagram depicts the work flow graphically.</p> 
  </div> 
  <div class="paragraph"> 
   <p><a href="img/revapi-workflow.png" data-lightbox="page"> <span class="image thumb"><img src="img/revapi-workflow.png" alt="revapi workflow" width="100%"></span> </a></p> 
  </div> 
  <div class="paragraph"> 
   <p>Each of the stages in that work flow is configurable. The configuration is supplied as JSON files, that are validated against JSON schemas that each extension can supply.</p> 
  </div> 
  <div class="sect2"> 
   <h3 id="extension_points">Extension points</h3> 
   <div class="paragraph"> 
    <p>The diagram above hints at several extension points available in Revapi.</p> 
   </div> 
   <div class="sect3"> 
    <h4 id="archives">Archives</h4> 
    <div class="paragraph"> 
     <p>An <a href="modules/revapi/apidocs/org/revapi/Archive.html">archive</a> is a very simple abstraction over a file that represents the archive containing some API elements (like Java’s jar archive or a class file, an XML document, properties file, etc).</p> 
    </div> 
    <div class="paragraph"> 
     <p>Revapi actually doesn’t provide any implementation of it on its own (only the standalone Revapi’s CLI contains a private implementation able to read from files) but it is trivial to implement one.</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="api_analyzer">API Analyzer</h4> 
    <div class="paragraph"> 
     <p>An <a href="modules/revapi/apidocs/org/revapi/ApiAnalyzer.html">API analyzer</a> (which is kinda implicit in the diagram) is the main interface for implementing API checks for custom "language". It provides and configures the analyzers of the archives and API difference analyzers both to be detailed below.</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="archive_analyzer">Archive Analyzer</h4> 
    <div class="paragraph"> 
     <p>An <a href="modules/revapi/apidocs/org/revapi/ArchiveAnalyzer.html">archive analyzer</a> is instantiated and configured by the API analyzer to analyze archives of a version of API. It represents the results of the analysis as an <a href="modules/revapi/apidocs/org/revapi/ElementForest.html">element forest</a> (i.e. a set of element trees).</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="element_filter">Element Filter</h4> 
    <div class="paragraph"> 
     <p>An <a href="modules/revapi/apidocs/org/revapi/ElementFilter.html">element filter</a> can filter out elements from the element forest before they are passed further down the API analysis pipeline. The same set of element filters is applied to both the old API and new API element forests.</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="difference_analyzer">Difference Analyzer</h4> 
    <div class="paragraph"> 
     <p>The magic happens in the <a href="modules/revapi/apidocs/org/revapi/DifferenceAnalyzer.html">difference analyzers</a>. Revapi simultaneously traverses the two element forests discovering new or removed elements and matching the comparable elements in them (using a <a href="modules/revapi/apidocs/org/revapi/CoIterator.html">co-iterator</a>). It then passes the matched pairs to the difference analyzer that performs the actual analysis of changes and provides the reports summarizing them.</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="difference_transform">Difference Transform</h4> 
    <div class="paragraph"> 
     <p>Once the differences are found they are supplied to the <a href="modules/revapi/apidocs/org/revapi/DifferenceTransform.html">difference transforms</a>. These extensions can, as the name suggests, transform the found differences into different ones or altogether remove them from the results.</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="reporter">Reporter</h4> 
    <div class="paragraph"> 
     <p>Finally, after the final set of differences is settled, it is passed to the <a href="modules/revapi/apidocs/org/revapi/Reporter.html">reporters</a>. These are responsible to report the found differences to the caller somehow (standard output, database, xml files, whatever one imagines).</p> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>
			</div>
		</div>
		<div class="col-md-4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#architecture" title="Architecture">Architecture <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li class="dropdown"><a href="#extension_points" title="Extension points">Extension points <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#archives" title="Archives">Archives</a>
		<li><a href="#api_analyzer" title="API Analyzer">API Analyzer</a>
		<li><a href="#archive_analyzer" title="Archive Analyzer">Archive Analyzer</a>
		<li><a href="#element_filter" title="Element Filter">Element Filter</a>
		<li><a href="#difference_analyzer" title="Difference Analyzer">Difference Analyzer</a>
		<li><a href="#difference_transform" title="Difference Transform">Difference Transform</a>
		<li><a href="#reporter" title="Reporter">Reporter</a>
			</ul>
		</li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="col-md-3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Basic Info</li>
						<li class="active">
							<a href="#" title="Architecture">Architecture</a>
						</li>
						<li >
							<a href="building.html" title="Building">Building</a>
						</li>
						<li >
							<a href="extensions.html" title="Extensions">Extensions</a>
						</li>
						<li class="nav-header">Sub Projects</li>
						<li >
							<a href="modules/revapi/index.html" title="Revapi API">Revapi API</a>
						</li>
						<li >
							<a href="modules/revapi-ant-task/index.html" title="Ant Task">Ant Task</a>
						</li>
						<li >
							<a href="modules/revapi-basic-features/index.html" title="Basic Features">Basic Features</a>
						</li>
						<li >
							<a href="modules/revapi-java/index.html" title="Java Extension">Java Extension</a>
						</li>
						<li >
							<a href="modules/revapi-java-spi/index.html" title="Java Extension SPI">Java Extension SPI</a>
						</li>
						<li >
							<a href="modules/revapi-java-test-support/index.html" title="Java Test Support">Java Test Support</a>
						</li>
						<li >
							<a href="modules/revapi-reporter-text/index.html" title="Text Report Extension">Text Report Extension</a>
						</li>
						<li >
							<a href="modules/revapi-maven-plugin/index.html" title="Maven Plugin">Maven Plugin</a>
						</li>
					</ul>
				</div>
				<div class="col-md-3 bottom-nav">
					<ul class="nav nav-list">
					</ul>
				</div>
				<div class="col-md-3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Maven Documentation</li>
						<li >
							<a href="project-info.html" title="Project Information">Project Information <i class="glyphicon glyphicon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
				<div class="col-md-3 bottom-description">
					<blockquote>Revapi</blockquote>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="col-md-12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2014-2018 <a href="http://lukas.krejci.pw">Lukas Krejci</a>. All Rights Reserved.</p>
				<p><a href="http://github.com/tunguski/msb3-maven-skin" title="Msb3 Maven skin">Msb3 Maven skin</a> by <a href="http://matsuo.pl" target="_blank" title="Marek Romanowski">Marek Romanowski</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.min.js"></script>
	<script src="./js/msb3-scroll.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
	
<script async="true" src="//revapi-org.disqus.com/count.js" id="dsq-count-scr"></script>
	<script src="./js/msb3-skin.js"></script>

	</body>
</html>