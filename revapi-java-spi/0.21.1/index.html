<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Revapi Java SPI :: Revapi</title>
    <link rel="canonical" href="https://revapi.org/revapi-java-spi/0.23.6/index.html">
    <meta name="generator" content="Antora 2.3.3">
<link rel="stylesheet" href="../../_/css/site.css">
<link rel="stylesheet" href="../../_/css/news.css">
<link rel="stylesheet" href="../../_/css/additions.css">

<link rel="alternate" type="application/rss+xml" title="Revapi RSS" href="../../_/../revapi-site/main/news/_attachments/news.atom" />
<link rel="stylesheet" href="../../_/css/search.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
    <nav class="navbar">
        <div class="navbar-brand">
            <a class="navbar-item" href="https://revapi.org">Revapi</a>
              <div class="navbar-item">
                <input id="search-input" type="text" placeholder="Search docs">
              </div>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
            <div class="navbar-end">
                <a class="navbar-item" href="../../revapi-site/main/index.html/../news/index.html">News</a>
                <a class="navbar-item" href="../../revapi-site/main/index.html/../downloads.html">Downloads</a>
                <a class="navbar-item" href="https://diff.revapi.org">Online Check</a>
                <a class="navbar-item" href="https://github.com/revapi/revapi"><img src="../../_/img/github.svg" alt="Github Repository"/></a>
                <a class="navbar-item" href="https://twitter.com/revapi_org"><img src="../../_/img/twitter.svg" alt="Twitter"/></a>
                <a class="navbar-item" href="../../_/../revapi-site/main/news/_attachments/news.atom"><img src="../../_/img/rss.svg" alt="RSS"/></a>
            </div>
        </div>
    </nav>
</header>
<div class="body">
<div class="nav-container" data-component="revapi-java-spi" data-version="0.21.1">
  <aside class="nav">
    <div class="panels">
    <div class="nav-panel-menu is-active" data-panel="menu">
        <nav class="nav-menu">
                <ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../revapi-site/main/getting-started.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../revapi-site/main/faq.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../revapi/0.14.4/architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../revapi/0.14.4/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../revapi/0.14.4/extending-revapi.html">Extending Revapi</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../revapi-site/main/building.html">Building</a>
  </li>
</ul>
  </li>
</ul>
            <ul class="nav-list">
                <li class="nav-item" data-depth="0">
                    <hr/>
                    <i class="nav-text">Modules</i>
                            <li class="nav-item" data-depth="0">
                                <a class="nav-link" href="../../revapi-ant-task/0.12.5/index.html">
                                    <span class="nav-text">Ant Task</span>
                                </a>
                            </li>
                            <li class="nav-item" data-depth="0">
                                <a class="nav-link" href="../../revapi/0.14.4/index.html">
                                    <span class="nav-text">API</span>
                                </a>
                            </li>
                            <li class="nav-item" data-depth="0">
                                <a class="nav-link" href="../../revapi-basic-features/0.12.5/index.html">
                                    <span class="nav-text">Basic Features</span>
                                </a>
                            </li>
                            <li class="nav-item" data-depth="0">
                                <a class="nav-link" href="../../revapi-standalone/0.11.5/index.html">
                                    <span class="nav-text">CLI</span>
                                </a>
                            </li>
                            <li class="nav-item" data-depth="0">
                                <a class="nav-link" href="../../revapi-reporter-file-base/0.4.5/index.html">
                                    <span class="nav-text">File Reporter Base</span>
                                </a>
                            </li>
                            <li class="nav-item" data-depth="0">
                                <a class="nav-link" href="../../revapi-jackson/0.4.1/index.html">
                                    <span class="nav-text">Jackson Analyzer Base</span>
                                </a>
                            </li>
                            <li class="nav-item" data-depth="0">
                                <a class="nav-link" href="../../revapi-java/0.26.1/index.html">
                                    <span class="nav-text">Java Analyzer</span>
                                </a>
                            </li>
                            <li class="nav-item is-active" data-depth="0">
                                <a class="nav-link" href="../0.23.6/index.html">
                                    <span class="nav-text">Java Analyzer SPI</span>
                                </a>
                                    <ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="_attachments/apidocs/index.html">Javadoc</a>
  </li>
</ul>
  </li>
</ul>
                            </li>
                            <li class="nav-item" data-depth="0">
                                <a class="nav-link" href="../../revapi-json/0.3.4/index.html">
                                    <span class="nav-text">JSON Analyzer</span>
                                </a>
                            </li>
                            <li class="nav-item" data-depth="0">
                                <a class="nav-link" href="../../revapi-reporter-json/0.4.5/index.html">
                                    <span class="nav-text">JSON Reporter</span>
                                </a>
                            </li>
                            <li class="nav-item" data-depth="0">
                                <a class="nav-link" href="../../revapi-maven-plugin/0.14.6/index.html">
                                    <span class="nav-text">Maven Plugin</span>
                                </a>
                            </li>
                            <li class="nav-item" data-depth="0">
                                <a class="nav-link" href="../../revapi-reporter-text/0.14.5/index.html">
                                    <span class="nav-text">Text Reporter</span>
                                </a>
                            </li>
                            <li class="nav-item" data-depth="0">
                                <a class="nav-link" href="../../revapi-yaml/0.3.4/index.html">
                                    <span class="nav-text">YAML Analyzer</span>
                                </a>
                            </li>
                </li>
            </ul>
        </nav>
    </div>
<div class="nav-panel-explore" data-panel="explore" style="display: none">
  <div class="context">
    <span class="title">Java Analyzer SPI</span>
    <span class="version">0.21.1</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Ant Task</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../revapi-ant-task/0.12.5/index.html">0.12.5</a>
        </li>
        <li class="version">
          <a href="../../revapi-ant-task/0.12.4/index.html">0.12.4</a>
        </li>
        <li class="version">
          <a href="../../revapi-ant-task/0.12.3/index.html">0.12.3</a>
        </li>
        <li class="version">
          <a href="../../revapi-ant-task/0.12.2/index.html">0.12.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-ant-task/0.12.1/index.html">0.12.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-ant-task/0.12.0/index.html">0.12.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-ant-task/0.11.2/index.html">0.11.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-ant-task/0.11.1/index.html">0.11.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-ant-task/0.11.0/index.html">0.11.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-ant-task/0.10.2/index.html">0.10.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-ant-task/0.10.1/index.html">0.10.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-ant-task/0.10.0/index.html">0.10.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">API</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../revapi/0.14.4/index.html">0.14.4</a>
        </li>
        <li class="version">
          <a href="../../revapi/0.14.3/index.html">0.14.3</a>
        </li>
        <li class="version">
          <a href="../../revapi/0.14.2/index.html">0.14.2</a>
        </li>
        <li class="version">
          <a href="../../revapi/0.14.1/index.html">0.14.1</a>
        </li>
        <li class="version">
          <a href="../../revapi/0.14.0/index.html">0.14.0</a>
        </li>
        <li class="version">
          <a href="../../revapi/0.13.2/index.html">0.13.2</a>
        </li>
        <li class="version">
          <a href="../../revapi/0.13.1/index.html">0.13.1</a>
        </li>
        <li class="version">
          <a href="../../revapi/0.13.0/index.html">0.13.0</a>
        </li>
        <li class="version">
          <a href="../../revapi/0.12.0/index.html">0.12.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Basic Features</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../revapi-basic-features/0.12.5/index.html">0.12.5</a>
        </li>
        <li class="version">
          <a href="../../revapi-basic-features/0.12.4/index.html">0.12.4</a>
        </li>
        <li class="version">
          <a href="../../revapi-basic-features/0.12.3/index.html">0.12.3</a>
        </li>
        <li class="version">
          <a href="../../revapi-basic-features/0.12.2/index.html">0.12.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-basic-features/0.12.1/index.html">0.12.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-basic-features/0.11.2/index.html">0.11.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-basic-features/0.11.1/index.html">0.11.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-basic-features/0.11.0/index.html">0.11.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-basic-features/0.10.2/index.html">0.10.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-basic-features/0.10.1/index.html">0.10.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-basic-features/0.10.0/index.html">0.10.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">CLI</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../revapi-standalone/0.11.5/index.html">0.11.5</a>
        </li>
        <li class="version">
          <a href="../../revapi-standalone/0.11.4/index.html">0.11.4</a>
        </li>
        <li class="version">
          <a href="../../revapi-standalone/0.11.3/index.html">0.11.3</a>
        </li>
        <li class="version">
          <a href="../../revapi-standalone/0.11.2/index.html">0.11.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-standalone/0.11.1/index.html">0.11.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-standalone/0.11.0/index.html">0.11.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-standalone/0.10.2/index.html">0.10.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-standalone/0.10.1/index.html">0.10.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-standalone/0.10.0/index.html">0.10.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-standalone/0.9.8/index.html">0.9.8</a>
        </li>
        <li class="version">
          <a href="../../revapi-standalone/0.9.7/index.html">0.9.7</a>
        </li>
        <li class="version">
          <a href="../../revapi-standalone/0.9.6/index.html">0.9.6</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">File Reporter Base</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../revapi-reporter-file-base/0.4.5/index.html">0.4.5</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-file-base/0.4.4/index.html">0.4.4</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-file-base/0.4.3/index.html">0.4.3</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-file-base/0.4.2/index.html">0.4.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-file-base/0.4.1/index.html">0.4.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-file-base/0.4.0/index.html">0.4.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-file-base/0.3.2/index.html">0.3.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-file-base/0.3.1/index.html">0.3.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-file-base/0.3.0/index.html">0.3.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-file-base/0.2.1/index.html">0.2.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-file-base/0.2.0/index.html">0.2.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Jackson Analyzer Base</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../revapi-jackson/0.4.1/index.html">0.4.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-jackson/0.4.0/index.html">0.4.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-jackson/0.3.2/index.html">0.3.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-jackson/0.3.1/index.html">0.3.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-jackson/0.3.0/index.html">0.3.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-jackson/0.2.1/index.html">0.2.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-jackson/0.2.0/index.html">0.2.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-jackson/0.1.1/index.html">0.1.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-jackson/0.1.0/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Java Analyzer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../revapi-java/0.26.1/index.html">0.26.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-java/0.26.0/index.html">0.26.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-java/0.25.0/index.html">0.25.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-java/0.24.4/index.html">0.24.4</a>
        </li>
        <li class="version">
          <a href="../../revapi-java/0.24.3/index.html">0.24.3</a>
        </li>
        <li class="version">
          <a href="../../revapi-java/0.24.2/index.html">0.24.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-java/0.24.1/index.html">0.24.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-java/0.24.0/index.html">0.24.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-java/0.23.2/index.html">0.23.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-java/0.23.1/index.html">0.23.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-java/0.23.0/index.html">0.23.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-java/0.22.1/index.html">0.22.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-java/0.22.0/index.html">0.22.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Java Analyzer SPI</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../0.23.6/index.html">0.23.6</a>
        </li>
        <li class="version">
          <a href="../0.23.5/index.html">0.23.5</a>
        </li>
        <li class="version">
          <a href="../0.23.4/index.html">0.23.4</a>
        </li>
        <li class="version">
          <a href="../0.23.3/index.html">0.23.3</a>
        </li>
        <li class="version">
          <a href="../0.23.2/index.html">0.23.2</a>
        </li>
        <li class="version">
          <a href="../0.23.1/index.html">0.23.1</a>
        </li>
        <li class="version">
          <a href="../0.23.0/index.html">0.23.0</a>
        </li>
        <li class="version">
          <a href="../0.22.2/index.html">0.22.2</a>
        </li>
        <li class="version">
          <a href="../0.22.1/index.html">0.22.1</a>
        </li>
        <li class="version">
          <a href="../0.22.0/index.html">0.22.0</a>
        </li>
        <li class="version is-current">
          <a href="index.html">0.21.1</a>
        </li>
        <li class="version">
          <a href="../0.21.0/index.html">0.21.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JSON Analyzer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../revapi-json/0.3.4/index.html">0.3.4</a>
        </li>
        <li class="version">
          <a href="../../revapi-json/0.3.3/index.html">0.3.3</a>
        </li>
        <li class="version">
          <a href="../../revapi-json/0.3.2/index.html">0.3.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-json/0.3.1/index.html">0.3.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-json/0.3.0/index.html">0.3.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-json/0.2.1/index.html">0.2.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-json/0.2.0/index.html">0.2.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-json/0.1.1/index.html">0.1.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-json/0.1.0/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JSON Reporter</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../revapi-reporter-json/0.4.5/index.html">0.4.5</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-json/0.4.4/index.html">0.4.4</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-json/0.4.3/index.html">0.4.3</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-json/0.4.2/index.html">0.4.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-json/0.4.1/index.html">0.4.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-json/0.4.0/index.html">0.4.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-json/0.3.2/index.html">0.3.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-json/0.3.1/index.html">0.3.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-json/0.3.0/index.html">0.3.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-json/0.2.1/index.html">0.2.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-json/0.2.0/index.html">0.2.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Maven Plugin</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../revapi-maven-plugin/0.14.6/index.html">0.14.6</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.14.5/index.html">0.14.5</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.14.4/index.html">0.14.4</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.14.3/index.html">0.14.3</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.14.2/index.html">0.14.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.14.1/index.html">0.14.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.14.0/index.html">0.14.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.13.6/index.html">0.13.6</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.13.5/index.html">0.13.5</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.13.4/index.html">0.13.4</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.13.3/index.html">0.13.3</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.13.2/index.html">0.13.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.13.1/index.html">0.13.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.13.0/index.html">0.13.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.12.2/index.html">0.12.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.12.1/index.html">0.12.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-maven-plugin/0.12.0/index.html">0.12.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Revapi Site</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../revapi-site/main/index.html">main</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Text Reporter</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../revapi-reporter-text/0.14.5/index.html">0.14.5</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-text/0.14.4/index.html">0.14.4</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-text/0.14.3/index.html">0.14.3</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-text/0.14.2/index.html">0.14.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-text/0.14.1/index.html">0.14.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-text/0.14.0/index.html">0.14.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-text/0.13.2/index.html">0.13.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-text/0.13.1/index.html">0.13.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-text/0.13.0/index.html">0.13.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-text/0.12.1/index.html">0.12.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-reporter-text/0.12.0/index.html">0.12.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">YAML Analyzer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../revapi-yaml/0.3.4/index.html">0.3.4</a>
        </li>
        <li class="version">
          <a href="../../revapi-yaml/0.3.3/index.html">0.3.3</a>
        </li>
        <li class="version">
          <a href="../../revapi-yaml/0.3.2/index.html">0.3.2</a>
        </li>
        <li class="version">
          <a href="../../revapi-yaml/0.3.1/index.html">0.3.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-yaml/0.3.0/index.html">0.3.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-yaml/0.2.1/index.html">0.2.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-yaml/0.2.0/index.html">0.2.0</a>
        </li>
        <li class="version">
          <a href="../../revapi-yaml/0.1.1/index.html">0.1.1</a>
        </li>
        <li class="version">
          <a href="../../revapi-yaml/0.1.0/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../revapi-site/main/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Java Extension SPI</a></li>
    <li><a href="index.html">Revapi Java SPI</a></li>
  </ul>
</nav>
  Version:
<div class="page-versions">
    <button class="version-menu-toggle" title="Versions of the component">
      0.21.1
    </button>
  <div class="version-menu">
        <a class="version" href="../0.23.6/index.html">

          0.23.6
        </a>
        <a class="version" href="../0.23.5/index.html">

          0.23.5
        </a>
        <a class="version" href="../0.23.4/index.html">

          0.23.4
        </a>
        <a class="version" href="../0.23.3/index.html">

          0.23.3
        </a>
        <a class="version" href="../0.23.2/index.html">

          0.23.2
        </a>
        <a class="version" href="../0.23.1/index.html">

          0.23.1
        </a>
        <a class="version" href="../0.23.0/index.html">

          0.23.0
        </a>
        <a class="version" href="../0.22.2/index.html">

          0.22.2
        </a>
        <a class="version" href="../0.22.1/index.html">

          0.22.1
        </a>
        <a class="version" href="../0.22.0/index.html">

          0.22.0
        </a>
        <a class="version is-current" href="index.html">

          0.21.1
        </a>
        <a class="version" href="../0.21.0/index.html">

          0.21.0
        </a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/revapi/revapi/edit/main/revapi-java-spi/src/site/modules/ROOT/pages/index.adoc" title="Edit the latest version of this page">Edit this page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Revapi Java SPI</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The SPI of the Revapi&#8217;s Java extension exists so that other extensions can take advantage of the capabilities of the
java extension - namely to analyze the java classes. The most interesting part of this section is therefore the
<a href="_attachments/apidocs/index.html">javadoc</a> of the SPI.</p>
</div>
<div class="paragraph">
<p>The below two examples show the two major extension points of Revapi&#8217;s Java checker:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the ability to define new checks</p>
</li>
<li>
<p>the ability to extract class files from custom archives</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enhancing_java_api_checks"><a class="anchor" href="#_enhancing_java_api_checks"></a>Enhancing Java API checks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this example it will be shown how to extend the Revapi&#8217;s java API checking capabilities. We will use the
<a href="_attachments/apidocs/org/revapi/java/spi/Check.html">hook interface</a> into the java checking process that
represents the Revapi&#8217;s API elements as Java&#8217;s own
<a href="http://docs.oracle.com/javase/8/docs/api/javax/lang/model/package-summary.html">model elements</a>.</p>
</div>
<div class="paragraph">
<p>The checking framework then can use the Java plaform&#8217;s own rich functionality for examining the classes in the checked
libraries (note, that this API is NOT the reflection API, because it actually doesn&#8217;t load the library classes into Java
runtime).</p>
</div>
<div class="paragraph">
<p>To make it actually useful, this example will show how to automatically ignore addition of any new methods on the EJB
interfaces. While a new method on an interface is generally an API breakage, because the implementations that were
developed against the old version of the interface would no longer be valid, this change is actually OK on EJB
interfaces, because these are not supposed to be implemented by "callers" - the implementations are in control of
the library that defines the EJBs.</p>
</div>
<div class="sect2">
<h3 id="_project_setup"><a class="anchor" href="#_project_setup"></a>Project setup</h3>
<div class="paragraph">
<p>First we need to set up our maven project. We will be extending Revapi&#8217;s Java extension that offers an SPI for doing so.
In the <code>pom.xml</code>, we will specify that we want to use that SPI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;project&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;my.group&lt;/groupId&gt;
    &lt;artifactId&gt;my.extension&lt;/artifactId&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.revapi&lt;/groupId&gt;
            &lt;artifactId&gt;revapi-java-spi&lt;/artifactId&gt;
            &lt;version&gt;0.21.1&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_code"><a class="anchor" href="#_code"></a>Code</h3>
<div class="paragraph">
<p>To ignore a found difference, we need to implement a
<a href="#revapi::attachment$/apidocs/org/revapi/DifferenceTransform.html">difference transform</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package my.extension;

import java.io.Reader;
import java.util.regex.Pattern;

import javax.lang.model.element.AnnotationMirror;
import javax.lang.model.element.ExecutableElement;

import org.revapi.AnalysisContext;
import org.revapi.Difference;
import org.revapi.DifferenceTransform;
import org.revapi.java.spi.JavaMethodElement;
import org.revapi.java.spi.Util;

public class IgnoreNewMethodsOnEJBInterfaces implements DifferenceTransform&lt;JavaMethodElement&gt; {
    @Override
    public Pattern[] getDifferenceCodePatterns() {
        return new Pattern[] { Pattern.compile("java\\.method\\.addedToInterface") };
    }

    @Override
    public Difference transform(JavaMethodElement oldElement, JavaMethodElement newElement,
        Difference difference) {

        // we know the element will be a JavaMethodElement. This is because we limit the
        // differences passed into this method.
        ExecutableElement method = newElement.getDeclaringElement();

        // ok, so we got a reference to the method that caused the difference. Now we need to
        // check whether the method was added to an EJB interface - we will just check whether
        // the interface was annotated with the @Local or @Remote annotations.
        for (AnnotationMirror annotation : method.getEnclosingElement().getAnnotationMirrors()) {
            // the Util class in the Java SPI provides a number of useful methods to ease the work
            // with the javax.lang.model objects.
            String annotationTypeName = Util.toHumanReadableString(annotation.getAnnotationType());
            if ("javax.ejb.Local".equals(annotationTypeName) ||
                "javax.ejb.Remote".equals(annotationTypeName)) {

                // ok, so we've found out that the type that declared the new method is indeed
                // an EJB interface. By returning null, we tell Revapi to remove this difference.
                return null;
            }
        }

        // ok, this is not an EJB interface, so we leave the difference alone
        return difference;
    }

    @Override
    public void close() throws Exception {
        // no resources to close...
    }

    @Override
    public String[] getConfigurationRootPaths() {
        // no configuration possible
        return null;
    }

    @Override
    public Reader getJSONSchema(String configurationRootPath) {
        // no configuration possible
        return null;
    }

    @Override
    public void initialize(AnalysisContext analysisContext) {
        // nothing needed here
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to the code itself, the class needs to be registered as an Revapi extension. For that it needs to be made
a java service. Create a file called <code>src/main/resources/META-INF/services/org.revapi.DifferenceTransform</code> and
add a line to it with the fully qualified name of the above class, i.e <code>my.extension.IgnoreNewMethodsOnEJBInterfaces</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_usage"><a class="anchor" href="#_usage"></a>Usage</h3>
<div class="paragraph">
<p>Once installed into a maven repository (local or some public), our extension becomes useable by Revapi. Both the
Revapi standalone and maven plugin support including new extensions by specifying their maven coordinates, see
<a href="../../revapi-site/main/getting-started.html" class="page">Getting Started</a> for more details on that.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_handling_new_packaging_of_code"><a class="anchor" href="#_handling_new_packaging_of_code"></a>Handling new packaging of code</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Java code is not always packaged as JAR files. WAR files, Spring Boot fat JARs, etc, all re-package the code in
custom ways which do not conform to or alter the default layout of a JAR file. Revapi doesn&#8217;t know where to find
significant classes of those artifacts (i.e. the classes that are unique to that artifact and not brought it from
dependencies) and therefore fails to properly analyze them for the API changes.</p>
</div>
<div class="paragraph">
<p>Fortunately, since <code>revapi-java-spi-0.18.0</code> and <code>revapi-java-0.19.0</code>, there is a new possibility to define custom ways
of extracting files from the archives, the <a href="_attachments/apidocs/org/revapi/java/spi/JarExtractor.html">JarExtractor</a>.</p>
</div>
<div class="paragraph">
<p>Implementations of this interface can be used to make Revapi "understand" new types of archives. Provided with an
abstraction of an archive (with a name and a way to open an input stream with the data of the archive), the jar
extractors are given a chance to transform the input stream of the archive in such a way that it looks like a JAR file
with the classes unique to that archive.</p>
</div>
<div class="paragraph">
<p>For example in the case of WAR files, such jar extractor should serve the classes from <code>WEB-INF/classes</code> but not
the contents of the libraries from <code>WEB-INF/lib</code>, which is meant to contain the dependencies of the main classes. Revapi
assumes that the dependencies of the main archive are supplied separately and thus it assumes that it already has access
to the equivalents of the jars from <code>WEB-INF/lib</code>. What it does not know is how to extract "significant" classes from
the WAR file itself that are not contained anywhere else.</p>
</div>
<div class="paragraph">
<p>Well, actually, the above is a bit of a lie. <code>revapi-java</code> contains a default <code>JarExtractor</code> for handling WAR files
already :)</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
    <p>Copyright 2014-2021 Lukas Krejci.</p>
    <p>This site was built using <a href="https://antora.org">Antora 2.3.3</a>.</p>
</footer>
<script>
  window.antora = window.antora || {}
  window.antora.basePath = '../..'
  window.antora.pagePath = '/revapi-java-spi/0.21.1/index.html'
</script>
<script src="../../_/js/site.js"></script>
  <script src="../../_/js/vendor/lunr.js"></script>
  <script src="../../_/js/vendor/search.js"></script>
  <script async src="../../_/../search-index.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script>
    function toggleVersionSelector(id) {
        var sel = document.getElementById(id)
        if (!sel) {
            return
        }

        if (sel.style.display == 'none') {
            sel.style.display = 'block';
        } else {
            sel.style.display = 'none';
        }
    }
</script>  </body>
</html>
